<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<title>HTTP Request Reference for JPA-RS | EclipseLink 2.4.x Understanding EclipseLink</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 1.0.11" />
<meta name="date" content="2012-12-07T9:39:14Z" />
<meta name="robots" content="noarchive" />
<meta name="doctitle" content="HTTP Request Reference for JPA-RS" />
<meta name="relnum" content="Release 2.4" />
<link rel="stylesheet" type="text/css" href="../../dcommon/style.css" media="screen" />
<link rel="copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="start" href="../../index.htm" title="Home" type="text/html" />
<link rel="contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="prev" href="restful_jpa002.htm" title="Previous" type="text/html" />
<link rel="next" href="qcn.htm" title="Next" type="text/html" />
<!-- START: Disqus --><script type="text/javascript">  var disqus_developer = 0; </script><!-- END: Disqus --><!-- START: Sharethis --><script type="text/javascript">var switchTo5x=true;</script><script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script><script type="text/javascript" src="http://s.sharethis.com/loader.js"></script> <!-- END: Sharethis --></head>
<body bgcolor="#FFFFFF"><iframe id="docheader" frameborder="0" framemargin="0" scrolling="no" src="../../dcommon/header.html"></iframe><div id="cse-search-form" style="width: 100%;"><span class="loadingspin">Loading</span></div><script src="http://www.google.com/jsapi" type="text/javascript"></script><script type="text/javascript">   google.load('search', '1', {language : 'en'});  google.setOnLoadCallback(function() {    var customSearchOptions = {};    var googleAnalyticsOptions = {};    googleAnalyticsOptions['queryParameter'] = 'q';    googleAnalyticsOptions['categoryParameter'] = '';    customSearchOptions['googleAnalyticsOptions'] = googleAnalyticsOptions;  var customSearchControl = new google.search.CustomSearchControl(      '016171230611334810008:mdbgdwjv8zu', customSearchOptions);    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);    var options = new google.search.DrawOptions();    options.setSearchFormRoot('cse-search-form');    customSearchControl.draw('cse', options);  }, true);</script><link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" /><div id="cse" style="width:100%;"></div> 
<div class="header"><a id="top" name="top"></a>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><font face="helvetica, arial, sans-serif"><b>EclipseLink Solutions Guide for EclipseLink</b><br />
Release 2.4</div></td>
<td valign="bottom" align="right" width="144">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td>&nbsp;</td>
<td align="center" valign="top"><a href="toc.htm"><img src="../../dcommon/images/contents.png" alt="Go To Table Of Contents" border="0" height="16" width="16" /><br />
<span class="mini">Contents</span></a></td><td>&nbsp;</td><td align="center"><a href="../../" target="_top" class="external text" title="Other searches" rel="nofollow"><img src="../../dcommon/images/search.png" alt="Search" style="border:0;" /><br /><span class="mini">Other&nbsp;Searches</span></a></td><td>&nbsp;</td><td align="center"><a href="../eclipselink_otlcg.pdf" title="PDF" target="_blank"><img src="../../dcommon/images/pdf_icon.png" style="padding-right:5px;border:0" alt="PDF"><br /><span class="mini">PDF</span></a></td><td align="center"><a href="#disqus_thread" title="Comments""><img src="../../dcommon/images/comments.png" style="padding-right:5px;border:0" alt="Comments"><br /><span class="mini">Comments</span></a>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="navigation simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100" align="center">
<tr>
<td align="center"><a href="restful_jpa002.htm"><img src="../../dcommon/images/larrow.png" alt="Previous" border="0" height="16" width="16" /></a></td>
<td align="center"><a href="qcn.htm"><img src="../../dcommon/images/rarrow.png" alt="Next" border="0" height="16" width="16" /></a></td>
<td>&nbsp;</td>
</tr>
</table>
</div>
<!-- class="header" -->
<div class="ind"><!-- End Header -->
<p align="center"><font color="#FF0000">Beta Draft: 2012-12-07</font></p>
<a id="CHDEGJIG" name="CHDEGJIG"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h1 class="sect1"><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Reference for JPA-RS</font></h1>
<p>The following types of RESTful operations can be used with JPA via HTTP when using JPA-RS.</p>
<ul>
<li>
<p><a href="#CHDEIFFJ">Entity Operations</a></p>
</li>
<li>
<p><a href="#CHDDAJBI">Entity Operations on Relationships</a></p>
</li>
<li>
<p><a href="#CHDJFCIF">Query Operations</a></p>
</li>
<li>
<p><a href="#CHDEHGDH">Base Operations</a></p>
</li>
<li>
<p><a href="#CHDFCFFA">Metadata Operations</a></p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDEIFFJ" name="CHDEIFFJ"></a>
<hr />
<div class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1"><font face="arial, helvetica, sans-serif" color="#330099">Entity Operations</font></h1>
<p>Entity operations are those performed against a specific entity type within the persistence unit.</p>
<p>The base URI for entity operations is as follows:</p>
<p><code>/persistence/{unit-name}/entity/{type}/*</code></p>
<p>The <code>{type}</code> value refers to the type name (descriptor alias).</p>
<p>Supported entity operations are:</p>
<ul>
<li>
<p><a href="#CHDEBJID">FIND</a></p>
</li>
<li>
<p><a href="#CHDCIIIG">PERSIST</a></p>
</li>
<li>
<p><a href="#CHDGJGDD">MERGE</a></p>
</li>
<li>
<p><a href="#CHDDDDAB">DELETE</a></p>
</li>
</ul>
<a id="CHDEBJID" name="CHDEBJID"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">FIND</font></h2>
<a id="sthref199" name="sthref199"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence/{unit-name}/entity/{type}/{id}</code> <em><code>hints</code></em></p>
<p>where:</p>
<ul>
<li>
<p><code>{id}</code> is a string</p>
</li>
<li>
<p><em><code>hints</code></em> are specified using HTTP query parameters, with the key being the name of the EclipseLink query hint</p>
</li>
</ul>
<a id="sthref200" name="sthref200"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/entity/Foo/1</code></p>
<a id="sthref201" name="sthref201"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref202" name="sthref202"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<ul>
<li>
<p><code>OK</code>, with a payload containing the entity</p>
</li>
<li>
<p><code>NOT_FOUND</code> if the entity does not exist</p>
</li>
</ul>
<a id="sthref203" name="sthref203"></a>
<p><strong><br /><span class="refsubsect">Usage</span></strong></p>
<p>The <code>EntityManager.find</code> API is as follows:</p>
<pre xml:space="preserve" class="oac_no_warn">
public &lt;T&gt; T find(Class&lt;T&gt; entityClass, Object primaryKey);
public &lt;T&gt; T find(Class&lt;T&gt; entityClass, Object primaryKey, Map&lt;String, Object&gt; properties);
</pre>
<p>Hints specified in the request are put into the <code>properties</code>. For example, see below.</p>
<a id="sthref204" name="sthref204"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Composite Keys</font></strong></p>
<p>Composite keys are supported. The <code>+</code> character is reserved and therefore cannot be used in fields that represent keys. Composite keys are separated using the <code>+</code> character and should be specified in an order corresponding to the Java default sorting of the attribute names.</p>
<p>For example, consider an entity <code>Phone</code>, with attributes <code>extB</code>=<code>123</code> and <code>extA</code>=<code>321</code>. The URL to find the entity is:</p>
<p><code>http://localhost:8080/persistence/ExamplePU/entity/Phone/321+123</code></p>
<p>The <code>321</code> comes before the <code>123</code> because <code>extA</code> comes before <code>extB</code> when sorted in Java.</p>
<a id="sthref205" name="sthref205"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Result Caching</font></strong></p>
<p>Default EclipseLink and HTTP caching is enabled and configured through standard means.</p>
<a id="CHDJGEFH" name="CHDJGEFH"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Refresh</font></strong></p>
<p>The <code>EntityManager.refresh</code> operation can be invoked using the <code>find</code> with the query hint for <code>Refresh</code>.</p>
<a id="sthref206" name="sthref206"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Attributes</font></strong></p>
<p>Navigating into the attributes of an entity (for example, to get the <code>Address</code> entity associated with an employee in a single URL) is supported to one level, for example:</p>
<p><code>/persistence/{unit-name}/entity/{type}/{id}/{relationship}</code> will work</p>
<p>while</p>
<p><code>/persistence/{unit-name}/entity/{type}/{id}/{relationship}/{index}/{relationship2</code>} will not</p>
<a id="CHDCIIIG" name="CHDCIIIG"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">PERSIST</font></h2>
<a id="sthref207" name="sthref207"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>PUT /persistence/{unit-name}/entity/{type}</code></p>
<a id="sthref208" name="sthref208"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>PUT http://localhost:8080/persistence/ExamplePU/entity/Foo</code></p>
<a id="sthref209" name="sthref209"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Consumes</font></strong></p>
<p>JSON or XML</p>
<a id="sthref210" name="sthref210"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Payload</font></strong></p>
<p>Entity</p>
<a id="sthref211" name="sthref211"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref212" name="sthref212"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p>Payload containing the entity returned by the persist operation</p>
<a id="sthref213" name="sthref213"></a>
<p><strong><br /><span class="refsubsect">Usage</span></strong></p>
<p><code>PUT</code> is required to be itempotent. As a result, it will fail if called with an object that expects the server to provide an ID field. Typically this will occur if the metadata specifies a generated key and the field that contains that key is unpopulated.</p>
<a id="CHDGJGDD" name="CHDGJGDD"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">MERGE</font></h2>
<a id="sthref214" name="sthref214"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>POST /persistence/{unit-name}/entity/{type}</code></p>
<a id="sthref215" name="sthref215"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>POST http://localhost:8080/persistence/ExamplePU/entity/Foo</code></p>
<a id="sthref216" name="sthref216"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Consumes</font></strong></p>
<p>JSON or XML</p>
<a id="sthref217" name="sthref217"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Payload</font></strong></p>
<p>Entity</p>
<a id="sthref218" name="sthref218"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref219" name="sthref219"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p>Payload containing the entity returned by the merge operation.</p>
<p>Merge takes an object graph and makes it part of the persistence context through comparison. It compares the object and all related objects to the ones that already exist and issues <code>INSERT</code>s, <code>UPDATE</code>s, and <code>DELETE</code>s to put the object in the persistence context.</p>
<a id="CHDDDDAB" name="CHDDDDAB"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">DELETE</font></h2>
<a id="sthref220" name="sthref220"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>DELETE /persistence/{unit-name}/entity/{type}{id}</code></p>
<p>where <code>{id}</code> is defined using HTTP query parameters</p>
<a id="sthref221" name="sthref221"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>DELETE http://localhost:8080/persistence/ExamplePU/entity/Foo?id=1</code></p>
<a id="sthref222" name="sthref222"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p><code>OK</code></p>
</div>
<!-- class="refsect1" -->
<a id="CHDDAJBI" name="CHDDAJBI"></a>
<hr />
<div class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1"><font face="arial, helvetica, sans-serif" color="#330099">Entity Operations on Relationships</font></h1>
<p>The base URI for relationship operations is as follows:</p>
<p><code>/persistence/{unit-name}/entity/{entity}/{id}/{relationship}</code></p>
<p>Supported relationship operations are:</p>
<ul>
<li>
<p><a href="#CHDCEJCC">READ</a></p>
</li>
<li>
<p><a href="#CHDBEDDA">ADD</a></p>
</li>
<li>
<p><a href="#CHDDGAII">REMOVE</a></p>
</li>
</ul>
<a id="CHDCEJCC" name="CHDCEJCC"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">READ</font></h2>
<p>Use this operation to get the values of a relationship.</p>
<a id="sthref223" name="sthref223"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence/{unit-name}/entity/{type}/{id}/{relationship}</code></p>
<p>where:</p>
<ul>
<li>
<p><code>{id}</code> is a string.</p>
</li>
<li>
<p><code>{relationship}</code> is the JPA name of the relationship.</p>
</li>
</ul>
<a id="sthref224" name="sthref224"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/entity/Foo/1/myRelationship</code></p>
<a id="sthref225" name="sthref225"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref226" name="sthref226"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<ul>
<li>
<p><code>OK</code>, Payload containing an entity or a list of entities.</p>
</li>
<li>
<p><code>NOT_FOUND</code> if the entity does not exist</p>
</li>
</ul>
<a id="CHDBEDDA" name="CHDBEDDA"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">ADD</font></h2>
<p>Use this operation to add to a list or replace the value of an x-1 relationship.</p>
<a id="sthref227" name="sthref227"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>POST /persistence/{unit-name}/entity/{type}/{id}/{relationship}{partner}</code></p>
<a id="sthref228" name="sthref228"></a>
<p><strong><br /><span class="refsubsect">Examples</span></strong></p>
<p>For unidirectional relationships, <code>{partner}</code> is not required, for example:</p>
<p><code>POST http://localhost:8080/persistence/ExamplePU/entity/Foo/1/myRelationship</code></p>
<p>For bi-directional relationships, you must provide the name of the attribute that makes up the opposite side of the relationship. For example, to update an <code>Auction.bid</code> where the opposite side of the relationship is <code>Bid.auction</code>, use the following:</p>
<p><code>POST http://localhost:8080/persistence/ExamplePU/entity/Foo/1/myRelationship;partner=bid</code></p>
<a id="sthref229" name="sthref229"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Consumes</font></strong></p>
<p>JSON or XML</p>
<a id="sthref230" name="sthref230"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Payload</font></strong></p>
<p>Entity with the new value.</p>
<div align="center">
<div class="inftblnote"><br />
<table class="Note oac_no_warn" summary="" border="1" width="80%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<tbody>
<tr>
<td align="left">
<p class="note"><img src="../../dcommon/images/note_icon.png" width="16" height="16" alt="Note" style="vertical-align:middle;padding-right:5px;" />Note:</p>
<p>Relationship objects can be passed by value or by reference. See <a href="restful_jpa001.htm#CHDBDBHJ">"Pass By Reference, Pass By Value"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblnote" --></div>
<a id="sthref231" name="sthref231"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref232" name="sthref232"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p>Payload containing the entity with the added element</p>
<a id="CHDDGAII" name="CHDDGAII"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">REMOVE</font></h2>
<p>Use this operation to remove a specific entity from the list or a null on an x-1 relationship.</p>
<a id="sthref233" name="sthref233"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>DELETE /persistence/{unit-name}/entity/{type}/{id}/{relationship}</code></p>
<a id="sthref234" name="sthref234"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>DELETE http://localhost:8080/persistence/ExamplePU/entity/Foo/1/myRelationship</code></p>
<a id="sthref235" name="sthref235"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Consumes</font></strong></p>
<p>JSON or XML</p>
<a id="sthref236" name="sthref236"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Payload</font></strong></p>
<p>The entity to be removed</p>
<div align="center">
<div class="inftblnote"><br />
<table class="Note oac_no_warn" summary="" border="1" width="80%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<tbody>
<tr>
<td align="left">
<p class="note"><img src="../../dcommon/images/note_icon.png" width="16" height="16" alt="Note" style="vertical-align:middle;padding-right:5px;" />Note:</p>
<p>Relationship objects can be passed by value or by reference. See <a href="restful_jpa001.htm#CHDBDBHJ">"Pass By Reference, Pass By Value"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblnote" --></div>
<a id="sthref237" name="sthref237"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref238" name="sthref238"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<ul>
<li>
<p>OK</p>
</li>
<li>
<p>Payload containing the entity with the removed element</p>
</li>
</ul>
</div>
<!-- class="refsect1" -->
<a id="CHDJFCIF" name="CHDJFCIF"></a>
<hr />
<div class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1"><font face="arial, helvetica, sans-serif" color="#330099">Query Operations</font></h1>
<p>The base URI for query operations is as follows:</p>
<p><code>GET /persistence/{unit-name}/query/{name}{params}</code></p>
<p>The following query operations are supported:</p>
<p>Named queries doing reads can be run two ways in JPA. Both are supported in the REST API. They are:</p>
<ul>
<li>
<p><a href="#CHDBDEBE">Query Returning List of Results</a></p>
</li>
<li>
<p><a href="#CHDIHEJJ">Update/Delete Query</a></p>
</li>
</ul>
<a id="CHDBDEBE" name="CHDBDEBE"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">Query Returning List of Results</font></h2>
<a id="sthref239" name="sthref239"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence/{unit-name}/query/{name}</code> <em><code>parameters</code></em> <em><code>hints</code></em></p>
<p>where:</p>
<ul>
<li>
<p><em><code>parameters</code></em> are specified using HTTP matrix parameters</p>
</li>
<li>
<p><em><code>hints</code></em> are specified using HTTP query parameters and with the key being the name of the EclipseLink query hint</p>
</li>
</ul>
<a id="sthref240" name="sthref240"></a>
<p><strong><br /><span class="refsubsect">Examples</span></strong></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/query/Foo.findByName;name=myname</code></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/query/Foo.findByName;name=myname?eclipselink.jdbc.max-results=500</code></p>
<a id="sthref241" name="sthref241"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref242" name="sthref242"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p>A payload containing a list of entities.</p>
<a id="CHDIHEJJ" name="CHDIHEJJ"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">Update/Delete Query</font></h2>
<a id="sthref243" name="sthref243"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>POST /persistence/{unit-name}/query/{name}</code> <em><code>parameters</code></em> <em><code>hints</code></em></p>
<p>where:</p>
<ul>
<li>
<p><em><code>parameters</code></em> are specified using HTTP matrix parameters</p>
</li>
<li>
<p><em><code>hints</code></em> are specified using HTTP query parameters and with the key being the name of the EclipseLink query hint</p>
</li>
</ul>
<a id="sthref244" name="sthref244"></a>
<p><strong><br /><span class="refsubsect">Examples</span></strong></p>
<p><code>POST http://localhost:8080/persistence/ExamplePU/query/Foo.deleteAllByName;name=myname</code></p>
<p><code>POST http://localhost:8080/persistence/ExamplePU/query/Foo.updateName;name=myname?eclipselink.jdbc.max-results=500</code></p>
<a id="sthref245" name="sthref245"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p><code>application/octet-stream</code></p>
<a id="sthref246" name="sthref246"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p>A payload containing the number of entities updated or deleted</p>
</div>
<!-- class="refsect1" -->
<a id="CHDHEJAJ" name="CHDHEJAJ"></a>
<hr />
<div class="refsect1">
<h1 class="refsect1"><font face="arial, helvetica, sans-serif" color="#330099">Single Result Queries</font></h1>
<a id="sthref247" name="sthref247"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence/{unit-name}/querySingleResult/{name}</code> <em><code>parameters</code></em> <em><code>hints</code></em></p>
<p>where:</p>
<ul>
<li>
<p><em><code>parameters</code></em> are specified using HTTP matrix parameters</p>
</li>
<li>
<p><em><code>hints</code></em> are specified using HTTP query parameters and with the key being the name of the EclipseLink query hint</p>
</li>
</ul>
<a id="sthref248" name="sthref248"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/querySingleResult/Foo.findByName;name=myname</code></p>
<a id="sthref249" name="sthref249"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON or XML</p>
<a id="sthref250" name="sthref250"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p>A payload containing an entity</p>
</div>
<!-- class="refsect1" -->
<a id="CHDEHGDH" name="CHDEHGDH"></a>
<hr />
<div class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1"><font face="arial, helvetica, sans-serif" color="#330099">Base Operations</font></h1>
<p>Base operations are:</p>
<ul>
<li>
<p><a href="#CHDCCFCI">List Existing Persistence Units</a></p>
</li>
<li>
<p><a href="#CHDIJEAE">Call a Session Bean</a></p>
</li>
</ul>
<a id="CHDCCFCI" name="CHDCCFCI"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">List Existing Persistence Units</font></h2>
<a id="sthref251" name="sthref251"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence</code></p>
<a id="sthref252" name="sthref252"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>GET http://localhost:8080/persistence/</code></p>
<a id="sthref253" name="sthref253"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON</p>
<a id="sthref254" name="sthref254"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<p>A payload containing a list of persistence unit names and links to metadata about them. For example,</p>
<pre xml:space="preserve" class="oac_no_warn">
[
  {
    "rel": "auction",
    "type": "application/json",
    "href": "http://localhost:8080/Model/jpa-rs/auction/metadata"
  },
  {
    "rel": "DataAppLibraryPU",
    "type": "application/json",
    "href": "http://localhost:8080/Model/jpa-rs/DataAppLibraryPU/metadata"
  }
]
</pre>
<a id="CHDIJEAE" name="CHDIJEAE"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">Call a Session Bean</font></h2>
<a id="sthref255" name="sthref255"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>POST /persistence</code></p>
<p>where the payload is a <code>SessionBeanCall</code> JSON or XML object containing the following information:</p>
<ul>
<li>
<p><code>jndiName</code> - The JNDI name of the <code>SessionBean</code></p>
</li>
<li>
<p><code>methodName</code> - The name of the <code>SessionBean</code> method to call</p>
</li>
<li>
<p><code>context</code> - (optional) The JPA RS context to use to unmarshall parameters and marshall return values. If not provided, return values are returned as is</p>
</li>
<li>
<p><code>parameters</code> - A list of parameter <code>Object</code> with the following information</p>
<ul>
<li>
<p><code>typeName</code> - The name of the java class of the parameter, or the name of the entity type in JPA RS</p>
</li>
<li>
<p><code>value</code> - The value of the parameter</p>
</li>
</ul>
</li>
</ul>
<div align="center">
<div class="inftblnote"><br />
<table class="Note oac_no_warn" summary="" border="1" width="80%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<tbody>
<tr>
<td align="left">
<p class="note"><img src="../../dcommon/images/note_icon.png" width="16" height="16" alt="Note" style="vertical-align:middle;padding-right:5px;" />Note:</p>
<p>To support the security of an application, it is reommended that you disaable this URL pattern by default. Only enable specific patterns that allow calling beans that are designed to be called.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblnote" --></div>
<a id="sthref256" name="sthref256"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<ul>
<li>
<p>Produces <code>*/*</code> for entities in XML or JSON</p>
</li>
<li>
<p>For queries that return single fields, returns the type associated with the field</p>
</li>
</ul>
<a id="sthref257" name="sthref257"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<ul>
<li>
<p><code>NOT_FOUND</code> if the context is not found or the session bean cannot be found on lookup</p>
</li>
<li>
<p><code>OK</code> when successful, with a payload containing the return value of a <code>SessionBean</code> method</p>
</li>
</ul>
</div>
<!-- class="refsect1" -->
<a id="CHDFCFFA" name="CHDFCFFA"></a>
<hr />
<div class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1"><font face="arial, helvetica, sans-serif" color="#330099">Metadata Operations</font></h1>
<p>The following metadata operations are supported:</p>
<ul>
<li>
<p><a href="#CHDGHGHB">List Types in a Persistence Unit</a></p>
</li>
<li>
<p><a href="#CHDGEFIJ">List Queries in a Persistence Unit</a></p>
</li>
<li>
<p><a href="#CHDJBAFI">Describe a Specific Entity</a></p>
</li>
</ul>
<a id="CHDGHGHB" name="CHDGHGHB"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">List Types in a Persistence Unit</font></h2>
<a id="sthref258" name="sthref258"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence/{unit-name}/metadata</code></p>
<a id="sthref259" name="sthref259"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/metadata</code></p>
<a id="sthref260" name="sthref260"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON</p>
<a id="sthref261" name="sthref261"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<ul>
<li>
<p><code>OK</code>, with a payload containing a list of types, with links to more detailed metadata</p>
<p>for example,</p>
<pre xml:space="preserve" class="oac_no_warn">
{
  "persistence-unit-name": "auction",
  "types": [
    {
      "rel": "User",
      "type": "application/json",
      "href": "http://localhost:8080/Model/jpa-rs/auction/metadata/entity/User"
    },
    {
      "rel": "Auction",
      "type": "application/json",
      "href": "http://localhost:8080/Model/jpa-rs/auction/metadata/entity/Auction"
    },
    {
      "rel": "Bid",
      "type": "application/json",
      "href": "http://localhost:8080/Model/jpa-rs/auction/metadata/entity/Bid"
    }
  ]
}
</pre></li>
<li>
<p><code>NOT_FOUND</code> if the persistence unit is not found</p>
</li>
</ul>
<a id="CHDGEFIJ" name="CHDGEFIJ"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">List Queries in a Persistence Unit</font></h2>
<a id="sthref262" name="sthref262"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence/{unit-name}/metadata/query</code></p>
<a id="sthref263" name="sthref263"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/metadata/query</code></p>
<a id="sthref264" name="sthref264"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON</p>
<a id="sthref265" name="sthref265"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<ul>
<li>
<p><code>OK</code> with a payload containing a list of all available queries, for example,</p>
<pre xml:space="preserve" class="oac_no_warn">
[
  {
    "query-name": "User.all",
    "reference-type": "jpars.app.auction.model.User",
    "jpql": "SELECT u from User u",
    "link-template": {
      "rel": "execute",
      "method": "get",
      "href": "http://localhost:8080/Model/jpa-rs/auction/query/User.all/{parameters}"
    }
  },
  {
    "query-name": "User.updateName",
    "reference-type": "jpars.app.auction.model.User",
    "jpql": "UPDATE User u SET u.name = :name WHERE u.id = :id",
    "link-template": {
      "rel": "execute",
      "method": "post",
      "href": "http://localhost:8080/Model/jpa-rs/auction/query/User.updateName/{parameters}"
    }
  }
]
</pre></li>
<li>
<p><code>NOT_FOUND</code> if persistence unit is not found</p>
</li>
</ul>
<a id="CHDJBAFI" name="CHDJBAFI"></a>
<hr />
<h2 class="refsect2"><font face="arial, helvetica, sans-serif" color="#330099">Describe a Specific Entity</font></h2>
<a id="sthref266" name="sthref266"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">HTTP Request Syntax</font></strong></p>
<p><code>GET /persistence/{unit-name}/metadata/entity/</code> <em><code>type</code></em></p>
<a id="sthref267" name="sthref267"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Example</font></strong></p>
<p><code>GET http://localhost:8080/persistence/ExamplePU/metadata/entity/MyEntity</code></p>
<a id="sthref268" name="sthref268"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Produces</font></strong></p>
<p>JSON</p>
<a id="sthref269" name="sthref269"></a>
<p><strong><font face="arial, helvetica, sans-serif" color="#330099">Response</font></strong></p>
<ul>
<li>
<p><code>OK</code>, with a payload containing details about the entity and available operations on it, for example,</p>
<pre xml:space="preserve" class="oac_no_warn">
{
  "name": "User",
  "type": "jpars.app.auction.model.User",
  "link-templates": [
    {
      "rel": "find",
      "type": "application/json",
      "method": "get",
      "href": "http://localhost:8080/Model/jpa-rs/auction/entity/Bid/{primaryKey}"
    },
    {
      "rel": "persist",
      "type": "application/json",
      "method": "put",
      "href": "http://localhost:8080/Model/jpa-rs/auction/entity/Bid"
    },
    {
      "rel": "update",
      "type": "application/json",
      "method": "post",
      "href": "http://localhost:8080/Model/jpa-rs/auction/entity/Bid"
    },
    {
      "rel": "delete",
      "type": "application/json",
      "method": "delete",
      "href": "http://localhost:8080/Model/jpa-rs/auction/entity/Bid/{primaryKey}"
    }
  ],
  "attributes": [
    {
      "name": "id",
      "type": "java.lang.Integer"
    },
    {
      "name": "name",
      "type": "java.lang.String"
    }
  ],
  "queries": [
    {
      "query-name": "User.all",
      "reference-type": "jpars.app.auction.model.User",
      "jpql": "SELECT u from User u"
    },
    {
      "query-name": "User.updateName",
      "reference-type": "jpars.app.auction.model.User",
      "jpql": "UPDATE User u SET u.name = :name WHERE u.id = :id"
    }
  ]
}
</pre></li>
<li>
<p><code>NOT_FOUND</code> if the persistence unit is not found</p>
</li>
</ul>
</div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td valign="bottom">
<table class="navigation simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100" align="center">
<col width="*" />
<col width="48%" />
<col width="48%" />
<tr>
<td>&nbsp;</td>
<td align="center"><a href="restful_jpa002.htm"><img src="../../dcommon/images/larrow.png" alt="Previous" border="0" height="16" width="16" /></a></td>
<td align="center"><a href="qcn.htm"><img src="../../dcommon/images/rarrow.png" alt="Next" border="0" height="16" width="16" /></a></td>
</tr>
</table>
</td>
<td align="center" width="34%"><a href="http://www.eclipse.org/eclipselink/" title="EclipseLink home"><img src="../../dcommon/images/ellogo.png" alt="EclipseLink" width="150" border="0" /></a><br />
                
  
<td valign="bottom" align="right">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="225">
<tr>
<td>&nbsp;</td>
<td align="center" valign="top"><a href="toc.htm"><img src="../../dcommon/images/contents.png" alt="Go To Table Of Contents" border="0" height="16" width="16" /><br />
<span class="mini">Contents</span></a></td><td>&nbsp;</td><td align="center"><a href="../../" target="_top" class="external text" title="Other searches" rel="nofollow"><img src="../../dcommon/images/search.png" alt="Search" style="border:0;" /><br /><span class="mini">Other&nbsp;Searches</span></a></td><td>&nbsp;</td><td align="center"><a href="../eclipselink_otlcg.pdf" title="PDF" target="_blank"><img src="../../dcommon/images/pdf_icon.png" style="padding-right:5px;border:0" alt="PDF"><br /><span class="mini">PDF</span></a></td><td align="center"><a href="#disqus_thread" title="Comments""><img src="../../dcommon/images/comments.png" style="padding-right:5px;border:0" alt="Comments"><br /><span class="mini">Comments</span></a>
</tr>
</table>
</td>
</tr>
</table>
</div>
<!-- class="footer" -->
<div id="copyright">Copyright &copy; 2012 by The Eclipse Foundation under the <a href="http://www.eclipse.org/org/documents/epl-v10.php">Eclipse Public License (EPL)</a><br /> <script type="text/javascript">var LastUpdated = document.lastModified;document.writeln ("Updated: " + LastUpdated);</script> </div><!-- START: Analytics --><script type="text/javascript">		  var _gaq = _gaq || [];		  _gaq.push(['_setAccount', 'UA-1608008-2']);		  _gaq.push(['_trackPageview']);				  (function() {		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);		  })();				</script><!-- END: Analytics --><!-- START: Sharethis --><script>var options={ "publisher": "e2fe9e07-fab6-4f84-83ea-0991b429842c", "position": "right", "ad": { "visible": false, "openDelay": 5, "closeDelay": 0}};var st_hover_widget = new sharethis.widgets.hoverbuttons(options);</script><!-- END: Sharethis --><!-- START: Disqus --><div id="disqus_thread"></div>        <script type="text/javascript">            var disqus_developer = 1;var disqus_shortname = 'eclipselinkdoc';              (function() {                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);            })();        </script>        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>        <a href="http://disqus.com" class="dsq-brlink">Comments powered by <span class="logo-disqus">Disqus</span></a><!-- END: Disqus --></body>
</html>
