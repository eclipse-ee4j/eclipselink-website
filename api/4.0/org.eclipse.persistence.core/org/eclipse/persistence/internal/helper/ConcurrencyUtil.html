<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>ConcurrencyUtil (EclipseLink 4.0.5, API Reference)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: module: org.eclipse.persistence.core, package: org.eclipse.persistence.internal.helper, class: ConcurrencyUtil">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><br>EclipseLink 4.0.5, API Reference</div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="../../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ConcurrencyUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../../../module-summary.html">org.eclipse.persistence.core</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.eclipse.persistence.internal.helper</a></div>
<h1 title="Class ConcurrencyUtil" class="title">Class ConcurrencyUtil</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.eclipse.persistence.internal.helper.ConcurrencyUtil</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">ConcurrencyUtil</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_CONCURRENCY_MANAGER_OBJECT_BUILDING_NO_THREADS" class="member-name-link">DEFAULT_CONCURRENCY_MANAGER_OBJECT_BUILDING_NO_THREADS</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_CONCURRENCY_MANAGER_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS_NO_THREADS" class="member-name-link">DEFAULT_CONCURRENCY_MANAGER_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS_NO_THREADS</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final long</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_CONCURRENCY_SEMAPHORE_LOG_TIMEOUT" class="member-name-link">DEFAULT_CONCURRENCY_SEMAPHORE_LOG_TIMEOUT</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_CONCURRENCY_SEMAPHORE_MAX_TIME_PERMIT" class="member-name-link">DEFAULT_CONCURRENCY_SEMAPHORE_MAX_TIME_PERMIT</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_OBJECT_BUILDING_CONCURRENCY" class="member-name-link">DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_OBJECT_BUILDING_CONCURRENCY</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS" class="member-name-link">DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="ConcurrencyUtil.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyUtil</a></code></div>
<div class="col-second even-row-color"><code><a href="#SINGLETON" class="member-name-link">SINGLETON</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cloneDeferredLockManager(org.eclipse.persistence.internal.helper.DeferredLockManager)" class="member-name-link">cloneDeferredLockManager</a><wbr>(<a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;deferredLockManagerOriginal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clone an original <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper"><code>DeferredLockManager</code></a> so that our algorithms of state dump or dead lock search can safely
 work ina stable model state that is not constantly changing.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cloneDeferredLockManagerMap(java.util.Map)" class="member-name-link">cloneDeferredLockManagerMap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagersOriginal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The exact same thing as the <a href="#cloneReadLockManagerMap(java.util.Map)"><code>cloneReadLockManagerMap(Map)</code></a> but the map we are cloning here is the one of
 threads to deferred locks</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cloneMapThreadToMethodName(java.util.Map)" class="member-name-link">cloneMapThreadToMethodName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Clone the map of the method names that tells us justification where threads acquire locks.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cloneMapThreadToObjectIdWithWriteLockManagerChanges(java.util.Map)" class="member-name-link">cloneMapThreadToObjectIdWithWriteLockManagerChanges</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;&nbsp;mapThreadToObjectIdWithWriteLockManagerChangesOriginal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Clone the information about threads that are in the write lock manager trying to commit and the object ids they
 are holding with some arbitrary changes.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cloneMapThreadToWaitOnAcquire(java.util.Map)" class="member-name-link">cloneMapThreadToWaitOnAcquire</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Clone the static map of the concurrency manager that tells us about threads waiting to acquire locks.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cloneMapThreadToWaitOnAcquireInsideWriteLockManagerOriginal(java.util.Map)" class="member-name-link">cloneMapThreadToWaitOnAcquireInsideWriteLockManagerOriginal</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Clone the static map of the concurrency manager that tells us about threads waiting to acquire locks.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cloneReadLockManagerMap(java.util.Map)" class="member-name-link">cloneReadLockManagerMap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagersOriginal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">To facilitate algorithms that want to dump a snapshot of the current state of the concurrency manager or to start
 a hunt for dead locks this api faciliates the boostraping logic of such algorithms by giving the algorithm a
 stable clone of the map of read locks that we know will not change throughout the time the algorithm is running.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#cloneSetThreadsThatAreCurrentlyWaitingToReleaseDeferredLocks(java.util.Set)" class="member-name-link">cloneSetThreadsThatAreCurrentlyWaitingToReleaseDeferredLocks</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksOriginal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">A set of threads that are at the end of object building and are waiting for the deferred locks to be resolved.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createConcurrencyManagerState(java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Set,java.util.Map,java.util.Map)" class="member-name-link">createConcurrencyManagerState</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagers,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagersOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadsThatAreCurrentlyWaitingToReleaseDeferredLocksJustificationClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;&nbsp;mapThreadToObjectIdWithWriteLockManagerChangesOriginal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">create a DTO that tries to represent the current snapshot of the concurrency manager and write lock manager cache
 state</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createInformationAboutAllResourcesAcquiredAndDeferredByAllThreads(org.eclipse.persistence.internal.helper.type.ConcurrencyManagerState)" class="member-name-link">createInformationAboutAllResourcesAcquiredAndDeferredByAllThreads</a><wbr>(<a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a>&nbsp;concurrencyManagerState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Log information about all threads tracked in the concurrency manager.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createInformationAboutAllResourcesAcquiredAndDeferredByThread(org.eclipse.persistence.internal.helper.ReadLockManager,org.eclipse.persistence.internal.helper.DeferredLockManager,java.util.Set,org.eclipse.persistence.internal.helper.ConcurrencyManager,boolean,java.lang.Thread,int,int,java.util.Set,java.lang.String)" class="member-name-link">createInformationAboutAllResourcesAcquiredAndDeferredByThread</a><wbr>(<a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&nbsp;readLockManager,
 <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;lockManager,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;waitingOnAcquireCacheKeys,
 <a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;waitingOnAcquireReadCacheKey,
 boolean&nbsp;threadWaitingToReleaseDeferredLocks,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread,
 int&nbsp;currentThreadNumber,
 int&nbsp;totalNumberOfThreads,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&nbsp;writeManagerThreadPrimaryKeysWithChangesToBeMerged,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;waitingToReleaseDeferredLocksJustification)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Build a string that tries to describe in as much detail as possible the resources associated to the current
 thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createInformationAboutAllThreadsWaitingToAcquireReadCacheKeys(java.util.Map,java.util.Map)" class="member-name-link">createInformationAboutAllThreadsWaitingToAcquireReadCacheKeys</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockMethodNameClone)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">In this page of log dumping information we want to give a summary to the user of threads that appear to be stuck
 doing an acquire of the cache key.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createInformationAboutAllThreadsWaitingToReleaseDeferredLocks(java.util.Set)" class="member-name-link">createInformationAboutAllThreadsWaitingToReleaseDeferredLocks</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksClone)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Log information about threads not moving forward because they are waiting for the
 <code>isBuildObjectOnThreadComplete </code> to return true.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="type/ReadLockAcquisitionMetadata.html" title="class in org.eclipse.persistence.internal.helper.type">ReadLockAcquisitionMetadata</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createReadLockAcquisitionMetadata(org.eclipse.persistence.internal.helper.ConcurrencyManager)" class="member-name-link">createReadLockAcquisitionMetadata</a><wbr>(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The concurrency managers about to acquire a cache key.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createToStringExplainingOwnedCacheKey(org.eclipse.persistence.internal.helper.ConcurrencyManager)" class="member-name-link">createToStringExplainingOwnedCacheKey</a><wbr>(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#currentThreadIsStuckForSomeTimeProduceTinyLogMessage(long,org.eclipse.persistence.internal.helper.ConcurrencyManager,org.eclipse.persistence.internal.helper.DeferredLockManager,org.eclipse.persistence.internal.helper.ReadLockManager)" class="member-name-link">currentThreadIsStuckForSomeTimeProduceTinyLogMessage</a><wbr>(long&nbsp;elapsedTime,
 <a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager,
 <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;lockManager,
 <a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&nbsp;readLockManager)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We have a thread that is not evolving for quite some while.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#determineIfReleaseDeferredLockAppearsToBeDeadLocked(org.eclipse.persistence.internal.helper.ConcurrencyManager,long,org.eclipse.persistence.internal.helper.DeferredLockManager,org.eclipse.persistence.internal.helper.ReadLockManager,boolean)" class="member-name-link">determineIfReleaseDeferredLockAppearsToBeDeadLocked</a><wbr>(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager,
 long&nbsp;whileStartTimeMillis,
 <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;lockManager,
 <a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&nbsp;readLockManager,
 boolean&nbsp;callerIsWillingToAllowInterruptedExceptionToBeFiredUpIfNecessary)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Throw an interrupted exception if appears that eclipse link code is taking too long to release a deferred lock.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpConcurrencyManagerInformationIfAppropriate()" class="member-name-link">dumpConcurrencyManagerInformationIfAppropriate</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoke the <a href="#dumpConcurrencyManagerInformationStep01(java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Set,java.util.Map,java.util.Map)"><code>dumpConcurrencyManagerInformationStep01(Map, Map, Map, Map, Map, Map, Map, Set, Map, Map)</code></a> if sufficient time has passed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpConcurrencyManagerInformationStep01(java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Set,java.util.Map,java.util.Map)" class="member-name-link">dumpConcurrencyManagerInformationStep01</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagers,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagersOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadsThatAreCurrentlyWaitingToReleaseDeferredLocksJustificationClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;&nbsp;mapThreadToObjectIdWithWriteLockManagerChangesOriginal)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The current working thread is having problems.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpConcurrencyManagerInformationStep02(org.eclipse.persistence.internal.helper.type.ConcurrencyManagerState)" class="member-name-link">dumpConcurrencyManagerInformationStep02</a><wbr>(<a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a>&nbsp;concurrencyManagerState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Dump the server log all of the information that we managed to aggregate about the current state of the
 concurrency manager.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpDeadLockExplanationIfPossible(org.eclipse.persistence.internal.helper.type.ConcurrencyManagerState)" class="member-name-link">dumpDeadLockExplanationIfPossible</a><wbr>(<a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a>&nbsp;concurrencyManagerState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enrichGenerateThreadDumpForCurrentThread()" class="member-name-link">enrichGenerateThreadDumpForCurrentThread</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This helper API is created due to the problem of the corruption of the eclipselink cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutActiveAndDeferredLocks(java.util.Map,java.util.Map)" class="member-name-link">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutActiveAndDeferredLocks</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagerMapClone)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Enrich our map map of cache key to threads having a relationship with that object in regards to active locks on
 the cache key and deferred locks on the cache key</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutReadLocks(java.util.Map,java.util.Map)" class="member-name-link">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutReadLocks</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagerMapClone)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Enrich the mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey based on the read locks</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquire(java.util.Map,java.util.Map)" class="member-name-link">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquire</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;unifiedMapOfThreadsStuckTryingToAcquireWriteLock)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Enrich the mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey by setting on the cache keys the threads
 that are stuck trying to acquire the cache key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquireLockForReading(java.util.Map,java.util.Map)" class="member-name-link">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquireLockForReading</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockClone)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Enrich the mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey by setting on the cache keys the threads
 that are stuck trying to acquire the cache key with a read lock.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#enrichMapThreadToWaitOnAcquireInsideWriteLockManagerClone(java.util.Map,java.util.Map)" class="member-name-link">enrichMapThreadToWaitOnAcquireInsideWriteLockManagerClone</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireClone)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">We have two maps we are using to trace threads that are stuck acquiring locks.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#get(org.eclipse.persistence.internal.helper.ConcurrencyManager,java.util.Map)" class="member-name-link">get</a><wbr>(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Helper method to make sure we never get null dto from the
 mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAcquireWaitTime()" class="member-name-link">getAcquireWaitTime</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBuildObjectCompleteWaitTime()" class="member-name-link">getBuildObjectCompleteWaitTime</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConcurrencySemaphoreLogTimeout()" class="member-name-link">getConcurrencySemaphoreLogTimeout</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConcurrencySemaphoreMaxTimePermit()" class="member-name-link">getConcurrencySemaphoreMaxTimePermit</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxAllowedFrequencyToProduceMassiveDumpLogMessage()" class="member-name-link">getMaxAllowedFrequencyToProduceMassiveDumpLogMessage</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the system is perceived to be frozen and not evolving any longer, we will allow that every so often (e.g.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxAllowedFrequencyToProduceTinyDumpLogMessage()" class="member-name-link">getMaxAllowedFrequencyToProduceTinyDumpLogMessage</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Just like we have a massive dump log message see <a href="#getMaxAllowedFrequencyToProduceMassiveDumpLogMessage()"><code>getMaxAllowedFrequencyToProduceMassiveDumpLogMessage()</code></a>
 we also want threads to produce "tiny" dump about the fact that they rae stuck.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxAllowedSleepTime()" class="member-name-link">getMaxAllowedSleepTime</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel()" class="member-name-link">getNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNoOfThreadsAllowedToObjectBuildInParallel()" class="member-name-link">getNoOfThreadsAllowedToObjectBuildInParallel</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAllowConcurrencyExceptionToBeFiredUp()" class="member-name-link">isAllowConcurrencyExceptionToBeFiredUp</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAllowInterruptedExceptionFired()" class="member-name-link">isAllowInterruptedExceptionFired</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAllowTakingStackTraceDuringReadLockAcquisition()" class="member-name-link">isAllowTakingStackTraceDuringReadLockAcquisition</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isUseSemaphoreInObjectBuilder()" class="member-name-link">isUseSemaphoreInObjectBuilder</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks()" class="member-name-link">isUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readLockManagerProblem01CreateLogErrorMessageToIndicateThatCurrentThreadHasNullReadLockManagerWhileDecrementingNumberOfReaders(int,int,org.eclipse.persistence.internal.helper.ConcurrencyManager)" class="member-name-link">readLockManagerProblem01CreateLogErrorMessageToIndicateThatCurrentThreadHasNullReadLockManagerWhileDecrementingNumberOfReaders</a><wbr>(int&nbsp;currentNumberOfReaders,
 int&nbsp;decrementedNumberOfReaders,
 <a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If when we are decrement the counter of number of readers on a cache key we find ourselves lacking the read lock
 manager at the time of the decrement we want to log a big fat error on the server log protecting that the current
 thread is misbehaving.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readLockManagerProblem02ReadLockManageHasNoEntriesForThread(org.eclipse.persistence.internal.helper.ConcurrencyManager,long)" class="member-name-link">readLockManagerProblem02ReadLockManageHasNoEntriesForThread</a><wbr>(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey,
 long&nbsp;threadId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readLockManagerProblem03ReadLockManageHasNoEntriesForThread(org.eclipse.persistence.internal.helper.ConcurrencyManager,long)" class="member-name-link">readLockManagerProblem03ReadLockManageHasNoEntriesForThread</a><wbr>(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey,
 long&nbsp;threadId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setAcquireWaitTime(long)" class="member-name-link">setAcquireWaitTime</a><wbr>(long&nbsp;acquireWaitTime)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setAllowConcurrencyExceptionToBeFiredUp(boolean)" class="member-name-link">setAllowConcurrencyExceptionToBeFiredUp</a><wbr>(boolean&nbsp;allowConcurrencyExceptionToBeFiredUp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setAllowInterruptedExceptionFired(boolean)" class="member-name-link">setAllowInterruptedExceptionFired</a><wbr>(boolean&nbsp;allowInterruptedExceptionFired)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setAllowTakingStackTraceDuringReadLockAcquisition(boolean)" class="member-name-link">setAllowTakingStackTraceDuringReadLockAcquisition</a><wbr>(boolean&nbsp;allowTakingStackTraceDuringReadLockAcquisition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setBuildObjectCompleteWaitTime(long)" class="member-name-link">setBuildObjectCompleteWaitTime</a><wbr>(long&nbsp;buildObjectCompleteWaitTime)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setConcurrencySemaphoreLogTimeout(long)" class="member-name-link">setConcurrencySemaphoreLogTimeout</a><wbr>(long&nbsp;concurrencySemaphoreLogTimeout)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setConcurrencySemaphoreMaxTimePermit(long)" class="member-name-link">setConcurrencySemaphoreMaxTimePermit</a><wbr>(long&nbsp;concurrencySemaphoreMaxTimePermit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxAllowedFrequencyToProduceMassiveDumpLogMessage(long)" class="member-name-link">setMaxAllowedFrequencyToProduceMassiveDumpLogMessage</a><wbr>(long&nbsp;maxAllowedFrequencyToProduceMassiveDumpLogMessage)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxAllowedFrequencyToProduceTinyDumpLogMessage(long)" class="member-name-link">setMaxAllowedFrequencyToProduceTinyDumpLogMessage</a><wbr>(long&nbsp;maxAllowedFrequencyToProduceTinyDumpLogMessage)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxAllowedSleepTime(long)" class="member-name-link">setMaxAllowedSleepTime</a><wbr>(long&nbsp;maxAllowedSleepTime)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel(int)" class="member-name-link">setNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel</a><wbr>(int&nbsp;noOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setNoOfThreadsAllowedToObjectBuildInParallel(int)" class="member-name-link">setNoOfThreadsAllowedToObjectBuildInParallel</a><wbr>(int&nbsp;noOfThreadsAllowedToObjectBuildInParallel)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setUseSemaphoreInObjectBuilder(boolean)" class="member-name-link">setUseSemaphoreInObjectBuilder</a><wbr>(boolean&nbsp;useSemaphoreInObjectBuilder)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks(boolean)" class="member-name-link">setUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks</a><wbr>(boolean&nbsp;useSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tooMuchTimeHasElapsed(long,long)" class="member-name-link">tooMuchTimeHasElapsed</a><wbr>(long&nbsp;whileStartTimeMillis,
 long&nbsp;maxAllowedSleepTimeMs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="SINGLETON">
<h3>SINGLETON</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="ConcurrencyUtil.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyUtil</a></span>&nbsp;<span class="element-name">SINGLETON</span></div>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_OBJECT_BUILDING_CONCURRENCY">
<h3>DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_OBJECT_BUILDING_CONCURRENCY</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_OBJECT_BUILDING_CONCURRENCY</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../../constant-values.html#org.eclipse.persistence.internal.helper.ConcurrencyUtil.DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_OBJECT_BUILDING_CONCURRENCY">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS">
<h3>DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../../constant-values.html#org.eclipse.persistence.internal.helper.ConcurrencyUtil.DEFAULT_USE_SEMAPHORE_TO_SLOW_DOWN_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_CONCURRENCY_MANAGER_OBJECT_BUILDING_NO_THREADS">
<h3>DEFAULT_CONCURRENCY_MANAGER_OBJECT_BUILDING_NO_THREADS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_CONCURRENCY_MANAGER_OBJECT_BUILDING_NO_THREADS</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../../constant-values.html#org.eclipse.persistence.internal.helper.ConcurrencyUtil.DEFAULT_CONCURRENCY_MANAGER_OBJECT_BUILDING_NO_THREADS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_CONCURRENCY_MANAGER_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS_NO_THREADS">
<h3>DEFAULT_CONCURRENCY_MANAGER_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS_NO_THREADS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_CONCURRENCY_MANAGER_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS_NO_THREADS</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../../constant-values.html#org.eclipse.persistence.internal.helper.ConcurrencyUtil.DEFAULT_CONCURRENCY_MANAGER_WRITE_LOCK_MANAGER_ACQUIRE_REQUIRED_LOCKS_NO_THREADS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_CONCURRENCY_SEMAPHORE_MAX_TIME_PERMIT">
<h3>DEFAULT_CONCURRENCY_SEMAPHORE_MAX_TIME_PERMIT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">DEFAULT_CONCURRENCY_SEMAPHORE_MAX_TIME_PERMIT</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../../constant-values.html#org.eclipse.persistence.internal.helper.ConcurrencyUtil.DEFAULT_CONCURRENCY_SEMAPHORE_MAX_TIME_PERMIT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_CONCURRENCY_SEMAPHORE_LOG_TIMEOUT">
<h3>DEFAULT_CONCURRENCY_SEMAPHORE_LOG_TIMEOUT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">DEFAULT_CONCURRENCY_SEMAPHORE_LOG_TIMEOUT</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../../constant-values.html#org.eclipse.persistence.internal.helper.ConcurrencyUtil.DEFAULT_CONCURRENCY_SEMAPHORE_LOG_TIMEOUT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="determineIfReleaseDeferredLockAppearsToBeDeadLocked(org.eclipse.persistence.internal.helper.ConcurrencyManager,long,org.eclipse.persistence.internal.helper.DeferredLockManager,org.eclipse.persistence.internal.helper.ReadLockManager,boolean)">
<h3>determineIfReleaseDeferredLockAppearsToBeDeadLocked</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">determineIfReleaseDeferredLockAppearsToBeDeadLocked</span><wbr><span class="parameters">(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager,
 long&nbsp;whileStartTimeMillis,
 <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;lockManager,
 <a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&nbsp;readLockManager,
 boolean&nbsp;callerIsWillingToAllowInterruptedExceptionToBeFiredUpIfNecessary)</span>
                                                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Throw an interrupted exception if appears that eclipse link code is taking too long to release a deferred lock.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>whileStartTimeMillis</code> - the start date of the while tru loop for releasing a deferred lock</dd>
<dd><code>callerIsWillingToAllowInterruptedExceptionToBeFiredUpIfNecessary</code> - this flag is to allow the write lock manager to say that it is afraid of a concurrency exception being
            fire up because the thread in a dead lock might be trying to do a commit and blowing these threads up
            is most likely too dangerous and possibly the eclipselink code is not robust enough to code with such
            scenarios We do not care so much about blowing up exception during object building but during
            committing of transactions we are very afraid</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - we fire an interrupted exception to ensure that the code blows up and releases all of the locks it
             had.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAcquireWaitTime()">
<h3>getAcquireWaitTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getAcquireWaitTime</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>"eclipselink.concurrency.manager.waittime" persistence property value.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setAcquireWaitTime(long)">
<h3>setAcquireWaitTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setAcquireWaitTime</span><wbr><span class="parameters">(long&nbsp;acquireWaitTime)</span></div>
</section>
</li>
<li>
<section class="detail" id="getBuildObjectCompleteWaitTime()">
<h3>getBuildObjectCompleteWaitTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getBuildObjectCompleteWaitTime</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>"eclipselink.concurrency.manager.build.object.complete.waittime" persistence property value.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setBuildObjectCompleteWaitTime(long)">
<h3>setBuildObjectCompleteWaitTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setBuildObjectCompleteWaitTime</span><wbr><span class="parameters">(long&nbsp;buildObjectCompleteWaitTime)</span></div>
</section>
</li>
<li>
<section class="detail" id="getMaxAllowedSleepTime()">
<h3>getMaxAllowedSleepTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMaxAllowedSleepTime</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>property to control how long we are willing to wait before firing up an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setMaxAllowedSleepTime(long)">
<h3>setMaxAllowedSleepTime</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMaxAllowedSleepTime</span><wbr><span class="parameters">(long&nbsp;maxAllowedSleepTime)</span></div>
</section>
</li>
<li>
<section class="detail" id="getMaxAllowedFrequencyToProduceTinyDumpLogMessage()">
<h3>getMaxAllowedFrequencyToProduceTinyDumpLogMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMaxAllowedFrequencyToProduceTinyDumpLogMessage</span>()</div>
<div class="block">Just like we have a massive dump log message see <a href="#getMaxAllowedFrequencyToProduceMassiveDumpLogMessage()"><code>getMaxAllowedFrequencyToProduceMassiveDumpLogMessage()</code></a>
 we also want threads to produce "tiny" dump about the fact that they rae stuck. We want to avoid these threads
 spaming too much the server log ... once the log message is out there not much point in continuously pumping the
 same log message out over and over again. Controlling how frequently the tiny dump is important especially when
 the user configures the hacked eclipselink to not fire up a blow up exception and instead to allow eclipselink to
 remain frozen forever.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the frequency with which we are allowed to create a tiny dump log message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setMaxAllowedFrequencyToProduceTinyDumpLogMessage(long)">
<h3>setMaxAllowedFrequencyToProduceTinyDumpLogMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMaxAllowedFrequencyToProduceTinyDumpLogMessage</span><wbr><span class="parameters">(long&nbsp;maxAllowedFrequencyToProduceTinyDumpLogMessage)</span></div>
</section>
</li>
<li>
<section class="detail" id="getMaxAllowedFrequencyToProduceMassiveDumpLogMessage()">
<h3>getMaxAllowedFrequencyToProduceMassiveDumpLogMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMaxAllowedFrequencyToProduceMassiveDumpLogMessage</span>()</div>
<div class="block">If the system is perceived to be frozen and not evolving any longer, we will allow that every so often (e.g. once
 a minute) the logic complaining that the thread is stuck and going nowhere logs a very big dump message where the
 FULL concurrency manager state is explained. So that we can (manually) try to understand the dead lock based on
 the dumped information

 See also <code>dateWhenLastConcurrencyManagerStateFullDumpWasPerformed</code>.</div>
</section>
</li>
<li>
<section class="detail" id="setMaxAllowedFrequencyToProduceMassiveDumpLogMessage(long)">
<h3>setMaxAllowedFrequencyToProduceMassiveDumpLogMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMaxAllowedFrequencyToProduceMassiveDumpLogMessage</span><wbr><span class="parameters">(long&nbsp;maxAllowedFrequencyToProduceMassiveDumpLogMessage)</span></div>
</section>
</li>
<li>
<section class="detail" id="isAllowInterruptedExceptionFired()">
<h3>isAllowInterruptedExceptionFired</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isAllowInterruptedExceptionFired</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setAllowInterruptedExceptionFired(boolean)">
<h3>setAllowInterruptedExceptionFired</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setAllowInterruptedExceptionFired</span><wbr><span class="parameters">(boolean&nbsp;allowInterruptedExceptionFired)</span></div>
</section>
</li>
<li>
<section class="detail" id="isAllowConcurrencyExceptionToBeFiredUp()">
<h3>isAllowConcurrencyExceptionToBeFiredUp</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isAllowConcurrencyExceptionToBeFiredUp</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if we are supposed to be firing up exception to abort the thread in a dead lock, false we are afraid
         of trying to abort the transaction and not managing to resolve the dead lock and prefer to system frozen
         and be forced into restarting it.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setAllowConcurrencyExceptionToBeFiredUp(boolean)">
<h3>setAllowConcurrencyExceptionToBeFiredUp</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setAllowConcurrencyExceptionToBeFiredUp</span><wbr><span class="parameters">(boolean&nbsp;allowConcurrencyExceptionToBeFiredUp)</span></div>
</section>
</li>
<li>
<section class="detail" id="isAllowTakingStackTraceDuringReadLockAcquisition()">
<h3>isAllowTakingStackTraceDuringReadLockAcquisition</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isAllowTakingStackTraceDuringReadLockAcquisition</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setAllowTakingStackTraceDuringReadLockAcquisition(boolean)">
<h3>setAllowTakingStackTraceDuringReadLockAcquisition</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setAllowTakingStackTraceDuringReadLockAcquisition</span><wbr><span class="parameters">(boolean&nbsp;allowTakingStackTraceDuringReadLockAcquisition)</span></div>
</section>
</li>
<li>
<section class="detail" id="isUseSemaphoreInObjectBuilder()">
<h3>isUseSemaphoreInObjectBuilder</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isUseSemaphoreInObjectBuilder</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setUseSemaphoreInObjectBuilder(boolean)">
<h3>setUseSemaphoreInObjectBuilder</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setUseSemaphoreInObjectBuilder</span><wbr><span class="parameters">(boolean&nbsp;useSemaphoreInObjectBuilder)</span></div>
</section>
</li>
<li>
<section class="detail" id="isUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks()">
<h3>isUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks(boolean)">
<h3>setUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setUseSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks</span><wbr><span class="parameters">(boolean&nbsp;useSemaphoreToLimitConcurrencyOnWriteLockManagerAcquireRequiredLocks)</span></div>
</section>
</li>
<li>
<section class="detail" id="getNoOfThreadsAllowedToObjectBuildInParallel()">
<h3>getNoOfThreadsAllowedToObjectBuildInParallel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getNoOfThreadsAllowedToObjectBuildInParallel</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setNoOfThreadsAllowedToObjectBuildInParallel(int)">
<h3>setNoOfThreadsAllowedToObjectBuildInParallel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setNoOfThreadsAllowedToObjectBuildInParallel</span><wbr><span class="parameters">(int&nbsp;noOfThreadsAllowedToObjectBuildInParallel)</span></div>
</section>
</li>
<li>
<section class="detail" id="getNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel()">
<h3>getNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel(int)">
<h3>setNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setNoOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel</span><wbr><span class="parameters">(int&nbsp;noOfThreadsAllowedToDoWriteLockManagerAcquireRequiredLocksInParallel)</span></div>
</section>
</li>
<li>
<section class="detail" id="getConcurrencySemaphoreMaxTimePermit()">
<h3>getConcurrencySemaphoreMaxTimePermit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getConcurrencySemaphoreMaxTimePermit</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setConcurrencySemaphoreMaxTimePermit(long)">
<h3>setConcurrencySemaphoreMaxTimePermit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setConcurrencySemaphoreMaxTimePermit</span><wbr><span class="parameters">(long&nbsp;concurrencySemaphoreMaxTimePermit)</span></div>
</section>
</li>
<li>
<section class="detail" id="getConcurrencySemaphoreLogTimeout()">
<h3>getConcurrencySemaphoreLogTimeout</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getConcurrencySemaphoreLogTimeout</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setConcurrencySemaphoreLogTimeout(long)">
<h3>setConcurrencySemaphoreLogTimeout</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setConcurrencySemaphoreLogTimeout</span><wbr><span class="parameters">(long&nbsp;concurrencySemaphoreLogTimeout)</span></div>
</section>
</li>
<li>
<section class="detail" id="createToStringExplainingOwnedCacheKey(org.eclipse.persistence.internal.helper.ConcurrencyManager)">
<h3>createToStringExplainingOwnedCacheKey</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createToStringExplainingOwnedCacheKey</span><wbr><span class="parameters">(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A to string of the cache key (e.g. that we are trying to lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="currentThreadIsStuckForSomeTimeProduceTinyLogMessage(long,org.eclipse.persistence.internal.helper.ConcurrencyManager,org.eclipse.persistence.internal.helper.DeferredLockManager,org.eclipse.persistence.internal.helper.ReadLockManager)">
<h3>currentThreadIsStuckForSomeTimeProduceTinyLogMessage</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">currentThreadIsStuckForSomeTimeProduceTinyLogMessage</span><wbr><span class="parameters">(long&nbsp;elapsedTime,
 <a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager,
 <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;lockManager,
 <a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&nbsp;readLockManager)</span></div>
<div class="block">We have a thread that is not evolving for quite some while. This is a fairy good indication of eclipselink being
 stuck in a dead lock. So we log some information about the thread that is stuck.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>elapsedTime</code> - how many ms have passed since the thread stopped moving</dd>
<dd><code>concurrencyManager</code> - the current cache key that the thread is trying to acquire or the object where the thread is waiting
            for the release deferred locks .</dd>
<dd><code>lockManager</code> - the lock manager</dd>
<dd><code>readLockManager</code> - the read lock manager</dd>
<dt>Returns:</dt>
<dd>Return the string with the tiny message we logged on the server log. This message can be interesting if
         we decide to fire up an interrupted exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tooMuchTimeHasElapsed(long,long)">
<h3>tooMuchTimeHasElapsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">tooMuchTimeHasElapsed</span><wbr><span class="parameters">(long&nbsp;whileStartTimeMillis,
 long&nbsp;maxAllowedSleepTimeMs)</span></div>
</section>
</li>
<li>
<section class="detail" id="dumpConcurrencyManagerInformationIfAppropriate()">
<h3>dumpConcurrencyManagerInformationIfAppropriate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dumpConcurrencyManagerInformationIfAppropriate</span>()</div>
<div class="block">Invoke the <a href="#dumpConcurrencyManagerInformationStep01(java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Set,java.util.Map,java.util.Map)"><code>dumpConcurrencyManagerInformationStep01(Map, Map, Map, Map, Map, Map, Map, Set, Map, Map)</code></a> if sufficient time has passed.
 This log message will potentially create a massive dump in the server log file. So we need to check when was the
 last time that the masive dump was produced and decide if we can log again the state of the concurrency manager.

 The access to dateWhenLastConcurrencyManagerStateFullDumpWasPerformedLock is synchronized, because we do not want
 two threads in parallel to star deciding to dump the complete state of the concurrency manager at the same time.
 Only one thread should succeed in producing the massive dump in a given time window.</div>
</section>
</li>
<li>
<section class="detail" id="dumpConcurrencyManagerInformationStep01(java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Set,java.util.Map,java.util.Map)">
<h3>dumpConcurrencyManagerInformationStep01</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dumpConcurrencyManagerInformationStep01</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagers,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagersOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadsThatAreCurrentlyWaitingToReleaseDeferredLocksJustificationClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;&nbsp;mapThreadToObjectIdWithWriteLockManagerChangesOriginal)</span></div>
<div class="block">The current working thread is having problems. It seems to not go forward being stuck either trying to acquire a
 cache key for writing, as a deferred cache key or it is at the end of the process and it is waiting for some
 other thread to finish building some objects it needed to defer.

 Now that the system is frozen we want to start spamming into the server log file the state of the concurrency
 manager since this might help us understand the situation of the system.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>deferredLockManagers</code> - static map coming from the concurrency manager telling us all the threds and their defferred locks and
            active locks</dd>
<dd><code>readLockManagersOriginal</code> - static map coming from the concurrency manager telling us all the threads and their read locks</dd>
<dd><code>mapThreadToWaitOnAcquireOriginal</code> - static map of threads that have registered themselves as waiting for some cache key</dd>
<dd><code>mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal</code> - this map relates to the fact that the write lock manager during transaction commits is very illusive.
            The write lock manger is not allowing itself to get stuck on acquiring any cache key. It uses waits
            with timings and therefore the locks needed to write and that cannot be obtained are not appearing
            inside our tracebility maps of the concurrency manager. We needed add the
            <code>WriteLockManager.THREAD_TO_FAIL_TO_ACQUIRE_CACHE_KEYS</code>
            but semantically this map is 100 percent the same thing as the mapThreadToWaitOnAcquireOriginal. It
            still represents a thread wanting to grab a write lock and not managing to get it. Being stuck in that
            step. Wo we will want to fuse together the (mapThreadToWaitOnAcquireOriginal and the
            mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal) to make our lives much easier.</dd>
<dd><code>setThreadWaitingToReleaseDeferredLocksOriginal</code> - static map of threads that have stopped going deeped in the recursion of object building and are
            waiting for the confirmation that some of the objects they needed to build are finished building.</dd>
<dd><code>mapThreadToObjectIdWithWriteLockManagerChangesOriginal</code> - The write lock manager has been tweaked to store information about objects ids that the current thread
            has in its hands and that will required for write locks to be acquired by a committing thread. This
            information is especially interesting if any thread participating in a dead lock is getting stuck in
            the acquisition of write locks as part of the commit process. This information might end up revealing
            a thread that has done too many changes and is creating a bigger risk fo dead lock. The more resources
            an individual thread tries to grab the worse it is for the concurrency layer. The size of the change
            set can be interesting.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dumpConcurrencyManagerInformationStep02(org.eclipse.persistence.internal.helper.type.ConcurrencyManagerState)">
<h3>dumpConcurrencyManagerInformationStep02</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dumpConcurrencyManagerInformationStep02</span><wbr><span class="parameters">(<a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a>&nbsp;concurrencyManagerState)</span></div>
<div class="block">Dump the server log all of the information that we managed to aggregate about the current state of the
 concurrency manager.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>concurrencyManagerState</code> - a snapshot of the current state of the concurrency manager and threads accessing locks.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dumpDeadLockExplanationIfPossible(org.eclipse.persistence.internal.helper.type.ConcurrencyManagerState)">
<h3>dumpDeadLockExplanationIfPossible</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">dumpDeadLockExplanationIfPossible</span><wbr><span class="parameters">(<a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a>&nbsp;concurrencyManagerState)</span></div>
</section>
</li>
<li>
<section class="detail" id="createConcurrencyManagerState(java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Map,java.util.Set,java.util.Map,java.util.Map)">
<h3>createConcurrencyManagerState</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a></span>&nbsp;<span class="element-name">createConcurrencyManagerState</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagers,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagersOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockMethodNameOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksOriginal,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadsThatAreCurrentlyWaitingToReleaseDeferredLocksJustificationClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;&nbsp;mapThreadToObjectIdWithWriteLockManagerChangesOriginal)</span></div>
<div class="block">create a DTO that tries to represent the current snapshot of the concurrency manager and write lock manager cache
 state</div>
</section>
</li>
<li>
<section class="detail" id="enrichGenerateThreadDumpForCurrentThread()">
<h3>enrichGenerateThreadDumpForCurrentThread</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">enrichGenerateThreadDumpForCurrentThread</span>()</div>
<div class="block">This helper API is created due to the problem of the corruption of the eclipselink cache. The idea is to have a
 tool that allows us to know specifically where the current thread was located when it acquired a READ LOCK.

 <P>
 Cache corruption problem: <br>
 namely the fact that when dead locks are seen to be taking place some of the threads that seem to be primary
 culprits of the dead lock are actually idle doing nothing but they have have left the number of readers of the
 cache corrupted (e.g. typically forever incremnted).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>get the stack trace of the current thread.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createInformationAboutAllThreadsWaitingToAcquireReadCacheKeys(java.util.Map,java.util.Map)">
<h3>createInformationAboutAllThreadsWaitingToAcquireReadCacheKeys</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createInformationAboutAllThreadsWaitingToAcquireReadCacheKeys</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockMethodNameClone)</span></div>
<div class="block">In this page of log dumping information we want to give a summary to the user of threads that appear to be stuck
 doing an acquire of the cache key.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapThreadToWaitOnAcquireReadLockClone</code> - this a cloned map that has an association between thread and cache keys the thread would like to
            acquire for READING but cannot because there is some active thread (other than themselves) holding the cache key (e.g. for writing)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createInformationAboutAllThreadsWaitingToReleaseDeferredLocks(java.util.Set)">
<h3>createInformationAboutAllThreadsWaitingToReleaseDeferredLocks</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createInformationAboutAllThreadsWaitingToReleaseDeferredLocks</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksClone)</span></div>
<div class="block">Log information about threads not moving forward because they are waiting for the
 <code>isBuildObjectOnThreadComplete </code> to return true.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>setThreadWaitingToReleaseDeferredLocksClone</code> - threads waiting for the release deferred lock process to complete.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createInformationAboutAllResourcesAcquiredAndDeferredByAllThreads(org.eclipse.persistence.internal.helper.type.ConcurrencyManagerState)">
<h3>createInformationAboutAllResourcesAcquiredAndDeferredByAllThreads</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createInformationAboutAllResourcesAcquiredAndDeferredByAllThreads</span><wbr><span class="parameters">(<a href="type/ConcurrencyManagerState.html" title="class in org.eclipse.persistence.internal.helper.type">ConcurrencyManagerState</a>&nbsp;concurrencyManagerState)</span></div>
<div class="block">Log information about all threads tracked in the concurrency manager.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>concurrencyManagerState</code> - and object that represents a snapshot of the current state of the concurrency manager.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createInformationAboutAllResourcesAcquiredAndDeferredByThread(org.eclipse.persistence.internal.helper.ReadLockManager,org.eclipse.persistence.internal.helper.DeferredLockManager,java.util.Set,org.eclipse.persistence.internal.helper.ConcurrencyManager,boolean,java.lang.Thread,int,int,java.util.Set,java.lang.String)">
<h3>createInformationAboutAllResourcesAcquiredAndDeferredByThread</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createInformationAboutAllResourcesAcquiredAndDeferredByThread</span><wbr><span class="parameters">(<a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&nbsp;readLockManager,
 <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;lockManager,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;waitingOnAcquireCacheKeys,
 <a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;waitingOnAcquireReadCacheKey,
 boolean&nbsp;threadWaitingToReleaseDeferredLocks,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread,
 int&nbsp;currentThreadNumber,
 int&nbsp;totalNumberOfThreads,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&nbsp;writeManagerThreadPrimaryKeysWithChangesToBeMerged,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;waitingToReleaseDeferredLocksJustification)</span></div>
<div class="block">Build a string that tries to describe in as much detail as possible the resources associated to the current
 thread.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>readLockManager</code> - the read lock manager for the current thread</dd>
<dd><code>lockManager</code> - the lock manager for the current thread</dd>
<dd><code>waitingOnAcquireCacheKeys</code> - null if the current thread is not waiting to acquire a cache key otherwise the cachekey that the
            current thread wants to acquire and that is making it block. This field evolved to be a set and not
            just one cache key because when we needed to tweak the write lock manager code to report about why the
            write lock manager is stuck we need it to create the map
            <code>WriteLockManager.THREAD_TO_FAIL_TO_ACQUIRE_CACHE_KEYS</code>
            whereby during a commit where entiteis are merged into the shared cache a thread might be trying to
            grab several write locks. so here we have a mix between the concurrency manager cache key a thread
            currently wants together with cache keys the write lock managed is not managing to grab.</dd>
<dd><code>waitingOnAcquireReadCacheKey</code> - cache key the thread is failing to acquire in the
            <a href="ConcurrencyManager.html#acquireReadLock()"><code>ConcurrencyManager.acquireReadLock()</code></a></dd>
<dd><code>threadWaitingToReleaseDeferredLocks</code> - true if the curren thread is now blocked waiting to confirm the locks it deferred have finished
            building the corresponding objects.</dd>
<dd><code>thread</code> - the thread eing described</dd>
<dd><code>currentThreadNumber</code> - just loop incremented index to help the dump log messages give the feeling of the current thread being
            described and how many more threads are still to be described</dd>
<dd><code>totalNumberOfThreads</code> - the total number of threads being described in a for loop</dd>
<dd><code>writeManagerThreadPrimaryKeysWithChangesToBeMerged</code> - Null for all threads excep those that are currently about to commit and merge changes to the shared
            cache. In this case it holds the primary keys of the objects that were changed by the transaction. The
            write lock manager has been tweaked to store information about objects ids that the current thread has
            in its hands and that will required for write locks to be acquired by a committing thread. This
            information is especially interesting if any thread participating in a dead lock is getting stuck in
            the acquisition of write locks as part of the commit process. This information might end up revealing
            a thread that has done too many changes and is creating a bigger risk fo dead lock. The more resources
            an individual thread tries to grab the worse it is for the concurrency layer. The size of the change
            set can be interesting.</dd>
<dd><code>waitingToReleaseDeferredLocksJustification</code> - when a thread is stuck for more than 500 ms in the release defferred locks algorithm, the concurrency
            manager starts try to justify why the method isBuildObjectComplete keeps returning false. This
            information is important whenever the param thread waiting to release deferred locks is true</dd>
<dt>Returns:</dt>
<dd>a string describing the thread provided. We can see the active locks, deferred locks, read locks etc...
         as well sa if the thread is waiting to acquire a specific cache key or waiting for build object to
         complete.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneMapThreadToWaitOnAcquire(java.util.Map)">
<h3>cloneMapThreadToWaitOnAcquire</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;</span>&nbsp;<span class="element-name">cloneMapThreadToWaitOnAcquire</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal)</span></div>
<div class="block">Clone the static map of the concurrency manager that tells us about threads waiting to acquire locks.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapThreadToWaitOnAcquireOriginal</code> - the original map we want to clone</dd>
<dt>Returns:</dt>
<dd>a cloned map</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneMapThreadToMethodName(java.util.Map)">
<h3>cloneMapThreadToMethodName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">cloneMapThreadToMethodName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;mapThreadToWaitOnAcquireOriginal)</span></div>
<div class="block">Clone the map of the method names that tells us justification where threads acquire locks.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapThreadToWaitOnAcquireOriginal</code> - the original map we want to clone</dd>
<dt>Returns:</dt>
<dd>a cloned map</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneMapThreadToWaitOnAcquireInsideWriteLockManagerOriginal(java.util.Map)">
<h3>cloneMapThreadToWaitOnAcquireInsideWriteLockManagerOriginal</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;</span>&nbsp;<span class="element-name">cloneMapThreadToWaitOnAcquireInsideWriteLockManagerOriginal</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal)</span></div>
<div class="block">Clone the static map of the concurrency manager that tells us about threads waiting to acquire locks.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapThreadToWaitOnAcquireInsideWriteLockManagerOriginal</code> - the original map we want to clone</dd>
<dt>Returns:</dt>
<dd>a cloned map</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="enrichMapThreadToWaitOnAcquireInsideWriteLockManagerClone(java.util.Map,java.util.Map)">
<h3>enrichMapThreadToWaitOnAcquireInsideWriteLockManagerClone</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">enrichMapThreadToWaitOnAcquireInsideWriteLockManagerClone</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;mapThreadToWaitOnAcquireInsideWriteLockManagerClone,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireClone)</span></div>
<div class="block">We have two maps we are using to trace threads that are stuck acquiring locks.
 One map is found in the concurrency manager the other in the write lock manager.
 When we start dumping information we only care about working with one and only one map.
 Therefore we merge the two maps together since semantically they both mean the exact same thing:
 a thread A wants a cachekey B for writing and is not getting it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapThreadToWaitOnAcquireInsideWriteLockManagerClone</code> - this is the map we want o enrich</dd>
<dd><code>mapThreadToWaitOnAcquireClone</code> - this is the map whose entries we want to copy into the map to enrich</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneSetThreadsThatAreCurrentlyWaitingToReleaseDeferredLocks(java.util.Set)">
<h3>cloneSetThreadsThatAreCurrentlyWaitingToReleaseDeferredLocks</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;</span>&nbsp;<span class="element-name">cloneSetThreadsThatAreCurrentlyWaitingToReleaseDeferredLocks</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&gt;&nbsp;setThreadWaitingToReleaseDeferredLocksOriginal)</span></div>
<div class="block">A set of threads that are at the end of object building and are waiting for the deferred locks to be resolved.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>setThreadWaitingToReleaseDeferredLocksOriginal</code> - the original set of threads that are waiting for deferred locks to be resolved.</dd>
<dt>Returns:</dt>
<dd>A cloned has set of threads waiting for their deferred locks to be resolved.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneMapThreadToObjectIdWithWriteLockManagerChanges(java.util.Map)">
<h3>cloneMapThreadToObjectIdWithWriteLockManagerChanges</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;</span>&nbsp;<span class="element-name">cloneMapThreadToObjectIdWithWriteLockManagerChanges</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;&gt;&nbsp;mapThreadToObjectIdWithWriteLockManagerChangesOriginal)</span></div>
<div class="block">Clone the information about threads that are in the write lock manager trying to commit and the object ids they
 are holding with some arbitrary changes.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapThreadToObjectIdWithWriteLockManagerChangesOriginal</code> - map of thread to the primary keys of of objects changed by a transaction in the commit phase. This is
            the original map grabbed from the WriteLockManager.</dd>
<dt>Returns:</dt>
<dd>a cloned map of thread to object id primary keys that a thread committing might have changed.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneReadLockManagerMap(java.util.Map)">
<h3>cloneReadLockManagerMap</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;</span>&nbsp;<span class="element-name">cloneReadLockManagerMap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagersOriginal)</span></div>
<div class="block">To facilitate algorithms that want to dump a snapshot of the current state of the concurrency manager or to start
 a hunt for dead locks this api faciliates the boostraping logic of such algorithms by giving the algorithm a
 stable clone of the map of read locks that we know will not change throughout the time the algorithm is running.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>readLockManagersOriginal</code> - This the original map of read locks referred by the concurrency manager. This is a very bad platform
            to work with because if for whatever reason not all threads are frozen and some are actualy managing
            to complete their transactions the contents of this map are systematically changing with threds being
            added in and removed.</dd>
<dt>Returns:</dt>
<dd>A clone of the readLockManagersOriginal. Essentially the map instance returned is new and independent and
         the values <a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper"><code>ReadLockManager</code></a> are also clones and independent. The only thing that is
         not cloned here - whose state could be changing - are the cache key themselves. The cache keys pointed by
         the vector <a href="ReadLockManager.html#getReadLocks()"><code>ReadLockManager.getReadLocks()</code></a> are the original values. So our clone
         from the read lock manager is not a perfectly stable clone. It will not be blowing up telling us
         concurrent access modification when we loop through the vector. But no one can guarnate the number of
         readers on the cache key stays the same nor that the active thread on a cache key stays the same... Those
         values can definitely be fluctuating (not ideal ... but it would be quite hard to get better than this).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneDeferredLockManagerMap(java.util.Map)">
<h3>cloneDeferredLockManagerMap</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;</span>&nbsp;<span class="element-name">cloneDeferredLockManagerMap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagersOriginal)</span></div>
<div class="block">The exact same thing as the <a href="#cloneReadLockManagerMap(java.util.Map)"><code>cloneReadLockManagerMap(Map)</code></a> but the map we are cloning here is the one of
 threads to deferred locks</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>deferredLockManagersOriginal</code> - the original map taken from the conrruency manager itself</dd>
<dt>Returns:</dt>
<dd>A clone of that map that is a relatively stable data structure to work with since no new threads will
         register in or out in the map nor will the DeferredLockManager values be changing. As for the read lock
         manager we have no assurance as to what is happening with the cache keys themselves refered by the
         <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper"><code>DeferredLockManager</code></a> values, the cache keys are always changing their metadata as new threads come
         in to do work or finish doing work. So it is not a perfect snapshot of the state of the system, but it is
         as close as we can get.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cloneDeferredLockManager(org.eclipse.persistence.internal.helper.DeferredLockManager)">
<h3>cloneDeferredLockManager</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a></span>&nbsp;<span class="element-name">cloneDeferredLockManager</span><wbr><span class="parameters">(<a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&nbsp;deferredLockManagerOriginal)</span></div>
<div class="block">Clone an original <a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper"><code>DeferredLockManager</code></a> so that our algorithms of state dump or dead lock search can safely
 work ina stable model state that is not constantly changing.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>deferredLockManagerOriginal</code> - an object that is originating from the map of thread to deferred locks from the concurrency manager
            class. We do not want to be carrying around the original object while try to make a dump/snapshot of
            the current state of the concurrency manager since these objects are always mutating. Locks are being
            acquired and released etc... All the tiem. The only objest thta will be stable are those of threads
            involved ina dead lock. And those are the threads that matter the most to us anyway.</dd>
<dt>Returns:</dt>
<dd>a cloned deferred lock manager. The newly created deferred lock manager will have its vectors of cache
         keys holding references the same cache keys as the original object. The cache keys themselves are not
         cloned. That measn that the DeferredLockManager will be immuatable in terms of its vectors and held
         references. But the objects it refers to (e.g. cache keys) can be mutating all the time if new readers or
         active threads arrive.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquire(java.util.Map,java.util.Map)">
<h3>enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquire</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquire</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&gt;&nbsp;unifiedMapOfThreadsStuckTryingToAcquireWriteLock)</span></div>
<div class="block">Enrich the mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey by setting on the cache keys the threads
 that are stuck trying to acquire the cache key.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey</code> - the map we are trying to enirhc with additional information</dd>
<dd><code>unifiedMapOfThreadsStuckTryingToAcquireWriteLock</code> - a map telling us about threads that at a certain point in time were not progressing anywhere because
            they were waiting to acquire a write lock. These are threads either stuck on the concurrency manager
            or in the write lock manager during a transaction commmit</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquireLockForReading(java.util.Map,java.util.Map)">
<h3>enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquireLockForReading</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoThreadsStuckOnAcquireLockForReading</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&gt;&nbsp;mapThreadToWaitOnAcquireReadLockClone)</span></div>
<div class="block">Enrich the mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey by setting on the cache keys the threads
 that are stuck trying to acquire the cache key with a read lock. These are threads stuck on the
 <a href="ConcurrencyManager.html#acquireReadLock()"><code>ConcurrencyManager.acquireReadLock()</code></a></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey</code> - the map we are trying to enirhc with additional information</dd>
<dd><code>mapThreadToWaitOnAcquireReadLockClone</code> - a map telling us about threads that at a certain point in time were not progressing anywhere because
            they were waiting to acquire a lock.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutReadLocks(java.util.Map,java.util.Map)">
<h3>enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutReadLocks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutReadLocks</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="ReadLockManager.html" title="class in org.eclipse.persistence.internal.helper">ReadLockManager</a>&gt;&nbsp;readLockManagerMapClone)</span></div>
<div class="block">Enrich the mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey based on the read locks</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey</code> - a map whose metadata we need to enrich</dd>
<dd><code>readLockManagerMapClone</code> - map cloned from the original map and that gives us a snapshot of threads that acquired read locks</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutActiveAndDeferredLocks(java.util.Map,java.util.Map)">
<h3>enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutActiveAndDeferredLocks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">enrichMapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKeyInfoAboutActiveAndDeferredLocks</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>,<wbr><a href="DeferredLockManager.html" title="class in org.eclipse.persistence.internal.helper">DeferredLockManager</a>&gt;&nbsp;deferredLockManagerMapClone)</span></div>
<div class="block">Enrich our map map of cache key to threads having a relationship with that object in regards to active locks on
 the cache key and deferred locks on the cache key</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey</code> - the map we want to enrich with more information</dd>
<dd><code>deferredLockManagerMapClone</code> - the cloned map with information about threads and their deferred locks.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="get(org.eclipse.persistence.internal.helper.ConcurrencyManager,java.util.Map)">
<h3>get</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a></span>&nbsp;<span class="element-name">get</span><wbr><span class="parameters">(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>,<wbr><a href="type/CacheKeyToThreadRelationships.html" title="class in org.eclipse.persistence.internal.helper.type">CacheKeyToThreadRelationships</a>&gt;&nbsp;mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey)</span></div>
<div class="block">Helper method to make sure we never get null dto from the
 mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cacheKey</code> - the cache key we are search for</dd>
<dd><code>mapOfCacheKeyToDtosExplainingThreadExpectationsOnCacheKey</code> - the map of cache key to concurrency manager locking metadata</dd>
<dt>Returns:</dt>
<dd>never returls null. If the cache key is not yet in the map a ney entry is returned.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="readLockManagerProblem01CreateLogErrorMessageToIndicateThatCurrentThreadHasNullReadLockManagerWhileDecrementingNumberOfReaders(int,int,org.eclipse.persistence.internal.helper.ConcurrencyManager)">
<h3>readLockManagerProblem01CreateLogErrorMessageToIndicateThatCurrentThreadHasNullReadLockManagerWhileDecrementingNumberOfReaders</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">readLockManagerProblem01CreateLogErrorMessageToIndicateThatCurrentThreadHasNullReadLockManagerWhileDecrementingNumberOfReaders</span><wbr><span class="parameters">(int&nbsp;currentNumberOfReaders,
 int&nbsp;decrementedNumberOfReaders,
 <a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey)</span></div>
<div class="block">If when we are decrement the counter of number of readers on a cache key we find ourselves lacking the read lock
 manager at the time of the decrement we want to log a big fat error on the server log protecting that the current
 thread is misbehaving.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>currentNumberOfReaders</code> - the current count of readers on the cache key about to be decremented</dd>
<dd><code>decrementedNumberOfReaders</code> - the number of readers of the cache key if we subtract one reader</dd>
<dd><code>cacheKey</code> - the cache key that is about to suffer a decrement on the number of readers</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="readLockManagerProblem02ReadLockManageHasNoEntriesForThread(org.eclipse.persistence.internal.helper.ConcurrencyManager,long)">
<h3>readLockManagerProblem02ReadLockManageHasNoEntriesForThread</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">readLockManagerProblem02ReadLockManageHasNoEntriesForThread</span><wbr><span class="parameters">(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey,
 long&nbsp;threadId)</span></div>
</section>
</li>
<li>
<section class="detail" id="readLockManagerProblem03ReadLockManageHasNoEntriesForThread(org.eclipse.persistence.internal.helper.ConcurrencyManager,long)">
<h3>readLockManagerProblem03ReadLockManageHasNoEntriesForThread</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">readLockManagerProblem03ReadLockManageHasNoEntriesForThread</span><wbr><span class="parameters">(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;cacheKey,
 long&nbsp;threadId)</span></div>
</section>
</li>
<li>
<section class="detail" id="createReadLockAcquisitionMetadata(org.eclipse.persistence.internal.helper.ConcurrencyManager)">
<h3>createReadLockAcquisitionMetadata</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="type/ReadLockAcquisitionMetadata.html" title="class in org.eclipse.persistence.internal.helper.type">ReadLockAcquisitionMetadata</a></span>&nbsp;<span class="element-name">createReadLockAcquisitionMetadata</span><wbr><span class="parameters">(<a href="ConcurrencyManager.html" title="class in org.eclipse.persistence.internal.helper">ConcurrencyManager</a>&nbsp;concurrencyManager)</span></div>
<div class="block">The concurrency managers about to acquire a cache key. And since we have been suffering from cache corruption on
 the acquire read locks we need to collect a lot more information about the time of acquisition of a read lock.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>concurrencyManager</code> - the cache key we are about to increment and acquire for reading</dd>
<dt>Returns:</dt>
<dd>object that have all the context information to allow us to know when and where
         exactly this key acquisition took place.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
